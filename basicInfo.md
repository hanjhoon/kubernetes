# 1-1. 파드(pod)란? 일시적인 존재


> 파드는 하나의 일시적인 가상 서버라고 보면 된다. 따라서 파드를 늘린다는 것은 서버를 늘린다고 생각하면 된다.
>
> 파드(pod)란 쿠버네티스에서 컨테이너를 실행하는 최소 단위다. 파드에는 컨테이너가 포함되어 있는데, 이 때, 하나의 파드에는 컨테이너 하나가 포함될 수도 있고, 여러 개의 컨테이너가 포함될 수도 있다.
>
> 그리고 하나의 파드에 속하는 컨테이너들은 같은 노드에서 동작 한다. 즉, 동일한 파드에 속해 있는 컨테이너들이 서로 다른 노드에 흩어진 상태로 동작할수는 없다는 뜻이다. (하나의 노드에 뭉쳐있어야함)
>
> 또한 파드 내부의 컨테이너들은 파드의 IP 주소와 포트번호를 공유 한다. 그리고 파드 내부 컨테이너들은 localhost로 서로 통신할 수 있으며, 파드의 볼륨을 마운트하여 파일 시스템을 공유할 수 있다.
> 
> 파드 IP는 기동시 부여되고 종료시 회수되어 다른 파드가 사용할 수 있다. 즉, 파드는 실행할 때마다 IP가 변경되므로 파드에 요청을 보내고 싶을 떄는 반드시 서비스(service)를 사용해야 한다.
> 
> 파드는 하나의 가상 서버 처럼 동작 한다.
> 
> 파드는 단독으로 사용되기 보다는 서비스, 컨트롤러, 컨피그맵, 퍼시스턴트 볼륨, 시크릿 등의 오브젝트와 함께 사용 된다.



# 1-2. 서비스(service)란?

> 쿠버네티스의 서비스(service)는 클라이언트의 요청을 파드에 전달하는 역할을 담당한다. 
> 
> 서비스가 필요한 이유는 파드의 IP가 계속 변경되기 때문, 따라서 파드에 접속하고자 하는 클라이언트는 파드에 바로 붙는 것이 아니라 서비스의 대표 IP를 통해서 파드 접속해야 한다. 
> 
> 이 때, 클라이언트는 외부의 클라이언트일수도 있고 다른 파드가 될 수도 있다.
> 
> 서비스는 로드밸런서 역할을 하며 클라이언트의 요청을 받기 위해 대표 IP 주소(clusterIP)를 획득 한다. 그리고 서비스의 이름은 내부 DNS에 등록되기 때문에 클라이언트는 서비스의 이름만으로 서비스의 IP주소를 획득할 수 있다. 
> 
> 클라이언트에게 받은 요청에 대해 서비스는 실렉터(selector)에 지정된 라벨과 일치하는 파드 중 하나에게 요청을 전달 한다. 
> 
> 서비스가 만들어지고 기동된 파드의 컨테이너에는 서비스에 대한 정보가 담긴 환경 변수가 자동으로 설정된다. 
> 
> 서비스의 종류에는 4가지 종류가 있는데, 클라이언트의 범위를 쿠버네티스 클러스터 내부로 한정할 지, 외부로 확장할지, 혹은 클러스터 외부의 IP 주소에 전송할지를 설정 한다.



# 1-3. 컨트롤러(controller)란?

> 컨트롤러는 파드를 제어 한다. 
> 
> 파드에게 부여할 워크로드 타입을 선택해야하는데 워크로드 타입 종류는 프론트엔드 처리, 백엔드 처리, 배치 처리, 시스템 운영 처리가 있다. 
> 
> 컨트롤러의 역할은 디플로이먼트(deployment), 스테이트풀셋(statefulset), 잡(job), 크론잡(cronjob), 데몬셋(daemonset), 레플리카셋(replicaset), 레플리케이션 컨트롤러(replication controller)가 있다. 
> 
> 가장 자주 사용되는 컨트롤러는 디플로이먼트다. 디플로이먼트는 백엔드 역할을 하는 파드(pod) 관리 툴(management tool)인데, 디플로이먼트의 주된 역할은 파드의 개수를 관리하는 것이다.
