kubectl

kubectl은 쿠버네티스 클러스터를 제어하기 위한 CLI툴이다. kubectl의 많은 명령어들 중에서도 가장 기본적인 명령어 몇 가지를 알아보자.

apply (리소스 생성)
리소스가 정의된 YAML 파일을 이용해 쿠버네티스에 리소스를 생성한다. 파일뿐만 아니라 URL도 입력 가능하다. 많은 예제에서 YAML 파일을 URL로 제공하고 있다.

kubectl apply -f [파일명 또는 URL]

get (리소스 목록 보기)
쿠버네티스에서 돌아가고 있는 리소스들을 확인한다.

kubectl get [리소스 타입]

대표적인 리소스 타입엔 pods, nodes, deployments, replicasets, services 등이 있다. 리소스 타입은 po, no, svc 처럼 줄여 쓸 수 있다. 이런 줄임말이나 모든 리소스 타입을 보려면 kubectl api-resources명령어를 통해 볼 수 있다.

인자
-o
출력 포맷을 지정한다. json으로 json형식으로 출력하거나 wide를 통해 더 정확한 정보를 볼 수 있다.

describe (리소스 정보 보기)
쿠버네티스에서 돌아가고 있는 리소스의 상세한 상태를 확인한다.

kubectl describe [리소스 타입]/[이름] 또는 [리소스 타입] [이름]

delete (리소스 삭제)
쿠버네티스에서 돌아가는 리소스를 제거한다.

kubectl delete [리소스 타입]/[이름] 또는 [리소스 타입] [이름] 또는 [yaml 파일]

특이점으로는 apply -f를 통해 생성한 리소스는 생성한 파일 또는 URL로 생성된 리소스를 지울 수 있다.

logs (리소스 로그 확인)
생성된 파드에 로그를 확인한다.

kubectl logs [파드 이름]

인자
-f
파드의 로그를 실시간으로 가져온다.

-c
파드에 여러개의 컨테이너가 있는 경우 컨테이너를 지정할 수 있다.

exec (리소스 명령어 전달)
컨테이너에 명령어를 전달한다.

kubectl exec [파드 이름] -- [명령어]

인자
-it
쉘로 컨테이너에 직접 접속한다.

-c
파드에 여러개의 컨테이너가 있는 경우 컨테이너를 지정할 수 있다.
